% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/04-alloc.R
\name{ffi_free}
\alias{ffi_free}
\title{Free memory pointed to by an external pointer}
\usage{
ffi_free(ptr)
}
\arguments{
\item{ptr}{External pointer to free}
}
\value{
NULL invisibly
}
\description{
Explicitly frees memory that was allocated by C code and returned as a pointer.
Use this when you know the pointer was allocated with malloc/calloc and it's
your responsibility to free it.
}
\details{
\strong{When to use this:}
\itemize{
\item Pointers returned from C functions that allocate memory (e.g., \code{strdup}, \code{malloc})
\item When C documentation says "caller must free"
}

\strong{When NOT to use this:}
\itemize{
\item Pointers allocated via \code{ffi_alloc()} (auto-freed by R's GC)
\item Static or global pointers from C
\item Pointers into existing structures
\item Pointers that C will free itself
}

Calling \code{ffi_free()} on an already-freed pointer or invalid pointer
will cause undefined behavior (likely crash).
}
\examples{
\dontrun{
# C function that allocates and returns a string
strdup_fn <- ffi_function("strdup", ffi_pointer(), ffi_string())
ptr <- strdup_fn("hello")
# ... use ptr ...
ffi_free(ptr) # We must free because strdup allocates
}

}
